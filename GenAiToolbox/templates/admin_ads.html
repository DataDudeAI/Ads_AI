{% extends "base.html" %}
{% block content %}
<h1>Manage Uploaded Ads</h1>
<form action="/admin/upload-ad" method="post" enctype="multipart/form-data">
    <input type="file" name="file" accept=".mp4,.webm" required>
    <button type="submit">Upload New Ad</button>
</form>
<table>
    <tr>
        <th>ID</th><th>Filename</th><th>Original Name</th><th>Active</th><th>Uploaded</th><th>Actions</th>
    </tr>
    {% for ad in ads %}
    <tr>
        <td>{{ ad.id }}</td>
        <td>{{ ad.filename }}</td>
        <td>{{ ad.original_name }}</td>
        <td>{{ "Yes" if ad.active else "No" }}</td>
        <td>{{ ad.upload_time }}</td>
        <td>
            <form action="/admin/ads/toggle" method="post" style="display:inline">
                <input type="hidden" name="ad_id" value="{{ ad.id }}">
                <button type="submit">{{ "Deactivate" if ad.active else "Activate" }}</button>
            </form>
            <form action="/admin/ads/delete" method="post" style="display:inline" onsubmit="return confirm('Delete this ad?')">
                <input type="hidden" name="ad_id" value="{{ ad.id }}">
                <button type="submit">Delete</button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}
